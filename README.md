# barge-simulator
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.6.0.

## Distance-Based Pricing Implementation

The barge simulator now includes distance-based pricing for jobs, making longer routes more profitable than shorter ones.

### Features:
- **Pre-calculated distance matrix** for optimal performance
- **Distance multiplier formula**: `1 + (distance / 1000) * 0.5`
- **Enhanced job information** including distance, base reward, and distance bonus
- **Scalable architecture** for easily adding new destinations

### Distance Values:
- London ↔ Leeds: 280 units
- London ↔ Bristol: 350 units  
- Leeds ↔ Bristol: 320 units

### Pricing Formula:
- Base price determined by resource supply/demand
- Distance multiplier applied to base price
- Final reward = Base Price × Distance Multiplier

Example: A £500 base price job over 350 units distance:
- Distance multiplier = 1 + (350/1000) × 0.5 = 1.175
- Final reward = £500 × 1.175 = £588

### Test Script

Use this script in Roblox Studio to test the distance-based pricing:

```lua
-- Test script for distance-based pricing
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ResourceManager = require(ReplicatedStorage.Shared.Modules.ResourceManager)

-- Initialize the resource manager
ResourceManager:Initialize()

print("=== Distance-Based Pricing Test ===")
print("\nTesting distance calculations:")

-- Test distance calculations
local londonToLeeds = ResourceManager:GetDistance("London", "Leeds")
local londonToBristol = ResourceManager:GetDistance("London", "Bristol")
local leedsToBristol = ResourceManager:GetDistance("Leeds", "Bristol")

print(string.format("London to Leeds: %d units", londonToLeeds))
print(string.format("London to Bristol: %d units", londonToBristol))
print(string.format("Leeds to Bristol: %d units", leedsToBristol))

print("\nTesting distance multipliers:")

local londonLeedsMultiplier = ResourceManager:GetDistanceMultiplier(londonToLeeds)
local londonBristolMultiplier = ResourceManager:GetDistanceMultiplier(londonToBristol)
local leedsBristolMultiplier = ResourceManager:GetDistanceMultiplier(leedsToBristol)

print(string.format("London-Leeds multiplier: %.2f", londonLeedsMultiplier))
print(string.format("London-Bristol multiplier: %.2f", londonBristolMultiplier))
print(string.format("Leeds-Bristol multiplier: %.2f", leedsBristolMultiplier))

print("\nTesting job generation with distance pricing:")

local jobs = ResourceManager:GetAvailableJobs()
print(string.format("Generated %d jobs with distance-based pricing", #jobs))

-- Display sample jobs with distance information
for i, job in ipairs(jobs) do
	if i <= 5 then -- Show first 5 jobs as sample
		print(string.format("\nJob %d: %s", job.id, job.name))
		print(string.format("  From: %s, To: %s", job.from, job.to))
		print(string.format("  Distance: %d units", job.distance))
		print(string.format("  Base Reward: £%d", job.baseReward))
		print(string.format("  Distance Bonus: £%d", job.distanceBonus))
		print(string.format("  Final Reward: £%d", job.reward))
		print(string.format("  Multiplier Effect: %.2fx", job.reward / job.baseReward))
	end
end

print("\n=== Test Complete ===")
print("Distance-based pricing system is working!")
print("Longer routes now pay more than shorter routes.")
```

## Adding New Destinations

To add a new destination:

1. **Add coordinates** to `DESTINATION_COORDS` in ResourceManager
2. **Add distances** to `DISTANCE_MATRIX` for all existing destinations
3. **Add destination configuration** to `DESTINATIONS` with resources and production rates
4. **Update distance matrix** with reciprocal distances

The system automatically handles distance calculations and pricing for new destinations.

## Getting Started
To build the place from scratch, use:

```bash
rojo build -o "barge-simulator.rbxlx"
```

Next, open `barge-simulator.rbxlx` in Roblox Studio and start the Rojo server:

```bash
rojo serve
```

For more help, check out [the Rojo documentation](https://rojo.space/docs).